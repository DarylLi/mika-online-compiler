"use strict";(self.webpackChunk_MikaEdit=self.webpackChunk_MikaEdit||[]).push([[786],{3786:(e,n,t)=>{t.r(n),t.d(n,{default:()=>J});var i=t(2197),a=t(3361),l=t(515),r=t(2709),o=t(7207),s=t(4788),c=[{filename:"src",value:"",path:"src",kind:"directory",children:[{filename:"index.html",value:'<div class="liveExample">\n    <img class="head-img" src="https://knockoutjs.com/img/ko-logo.png" />\n    <h1>This is KnockOut page !</h1>\n    <p>First name: <input data-bind="value: firstName" /></p>\n    <p>Last name: <input data-bind="value: lastName" /></p>\n    <h2>Hello,</h2>\n    <span class="bindName" data-bind="text: fullName">!</span>\n    <p />\n    You\'ve clicked <span data-bind="text: numberOfClicks"></span> times\n    <button data-bind="click: incrementClickCounter">Click me</button>\n</div>\n\n',path:"src/index.html"},{filename:"index.js",value:"// Here's my data model\nvar ViewModel = function (first, last) {\n    this.firstName = ko.observable(first);\n    this.lastName = ko.observable(last);\n    this.numberOfClicks = ko.observable(0);\n    this.incrementClickCounter = function () {\n        var previousCount = this.numberOfClicks();\n        this.numberOfClicks(previousCount + 1);\n    };\n    this.fullName = ko.computed(function () {\n        // Knockout tracks dependencies automatically. It knows that fullName depends on firstName and lastName, because these get called when evaluating fullName.\n        return this.firstName() + ' ' + this.lastName();\n    }, this);\n};\nconsole.log('start ko!')\nko.applyBindings(new ViewModel('KnockOut', 'Page')); // This makes Knockout get to work\n",path:"src/index.js"},{filename:"index.css",value:"html,\nbody {\n    font-family: arial;\n    font-size: 14px;\n    height: 100%;\n    margin: 0;\n}\n.bindName{\n  font-size: 16px;\n  color: #dedede;\n  font-weight: bold;\n}\n.liveExample {\n    box-sizing: border-box;\n    width: auto;\n    padding: 10px;\n    background-color: #CF5300;\n    height: 100%;\n}\nh1 {\n    text-align: center;\n    color: #fff;\n}\n.liveExample input {\n    font-family: Arial;\n}\n.liveExample b {\n    font-weight: bold;\n}\n.liveExample p {\n    margin-top: 0.9em;\n    margin-bottom: 0.9em;\n}\n.liveExample select[multiple] {\n    width: 100%;\n    height: 8em;\n}\n.liveExample h2 {\n    margin-top: 0.4em;\n    font-weight: bold;\n    font-size: 1.2em;\n}\n",path:"src/index.css"}]}],u=t(6205),d=t(8833),p=function(e,n,t){var i,a={"index.html":e};((null==n||null===(i=n[0])||void 0===i?void 0:i.children)||[]).forEach(function(e){/index.html/.test(e.filename)||(a["".concat(e.filename)]=e.value)}),null==a||a["index.js"];var l=null==a?void 0:a["index.css"],r=null==a?void 0:a["index.js"],o=null==a?void 0:a["index.html"],s=document.createElement("iframe");s.setAttribute("id","frameLive"),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("style","border:0px"),s.setAttribute("srcdoc",'<!DOCTYPE html>\n<html lang="zh-CN">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>knock-out-js preview page</title>\n    <style>'.concat(l,"</style>\n</head>\n<body>\n<script>\nwindow.console=window.parent.console;\n<\/script>\n").concat(o,'\n    <script type="text/javascript" src="https://knockoutjs.com/downloads/knockout-3.2.0.js"><\/script>\n        <script type="text/javascript">\n            ').concat(r,"\n        <\/script>\n    </body>\n    </html>")),document.getElementById("previewFrame").innerHTML="",document.getElementById("previewFrame").appendChild(s)},f=t(1187),m=t(7453),h=t(3759),v=t(4539),b=t(7861),y=t(8918),k=t(475),x=t(9075),g=t(3790),w=function(){return w=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},w.apply(this,arguments)},j=function(e,n,t){if(t||2===arguments.length)for(var i,a=0,l=n.length;a<l;a++)!i&&a in n||(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return e.concat(i||Array.prototype.slice.call(n))};const C=(0,x.PA)(function(e){var n,t=this,x=(e.cpType,(0,i.useState)({})),C=(x[0],x[1]),U=(0,i.useState)([c[0].children[0].path]),A=U[0],N=U[1],O=l.Ay.useMessage(),F=O[0],E=O[1],I=(0,i.useState)(null),S=I[0],P=(I[1],(0,i.useState)("")),T=P[0],B=P[1],D=(0,i.useState)(""),H=D[0],M=D[1],z=(0,i.useState)(""),K=z[0],J=z[1],L=(0,i.useState)([null===(n=c[0])||void 0===n?void 0:n.path]),_=L[0],G=L[1],R=function(e){var n=(0,g.HO)(u.U.currentFiles);(n[0].children||[]).forEach(function(e){e.path===K&&(e.filename=H)}),u.U.setCurrentFiles(n);var t={id:"daryl",name:"daryl",templates:(0,g.HO)(n)};(0,k.O6)(u.U.currentIndexDBInstance.db,"ko-ng-templates",t);var i=n[0].children.find(function(e){return e.filename.includes("index.html")});p((null==i?void 0:i.value)||"",n),B(""),M(""),J("")},Q=function(e){if(e.preventDefault(),e.stopPropagation(),!S){var n=(0,g.HO)(u.U.currentFiles);(n[0].children||[]).forEach(function(e){e.path===K&&(e.filename=H)});var t=n[0].children;if(t.length>7)F.open({type:"error",content:"maxium file number reached ！！"});else{var i={filename:"newFile".concat(t.length,".js"),path:"src/newFile".concat(t.length,".js"),value:" "};n[0].children.push(i),u.U.setCurrentFiles(n);var a={id:"daryl",name:"daryl",templates:(0,g.HO)(n)};(0,k.O6)(u.U.currentIndexDBInstance.db,"mika-ko-templates",a)}}},V=function(e,n){var t,i,a,l,r,o,s;"directory"!==(null===(t=null==n?void 0:n.node)||void 0===t?void 0:t.kind)&&u.U.updateCode((0,d._P)(u.U.currentFiles,null===(i=null==n?void 0:n.node)||void 0===i?void 0:i.path)||"",null===(a=null==n?void 0:n.node)||void 0===a?void 0:a.path),"directory"!==(null===(l=null==n?void 0:n.node)||void 0===l?void 0:l.kind)&&u.U.updateInfo((null==n?void 0:n.node)||""),G(_.includes(null===(r=null==n?void 0:n.node)||void 0===r?void 0:r.filename)?_.filter(function(e){return e!==n.node.filename}):j(j([],_,!0),[null===(o=null==n?void 0:n.node)||void 0===o?void 0:o.filename],!1)),N([null===(s=null==n?void 0:n.node)||void 0===s?void 0:s.path]),B(""),J("")};return(0,i.useEffect)(function(){var e={db:null,storeName:"mika-ko-templates",version:1},n={id:"daryl",name:"daryl",templates:c};setTimeout(function(){return i=t,a=void 0,r=function(){var t,i,a,l,r;return function(e,n){var t,i,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=o(0),r.throw=o(1),r.return=o(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(o){return function(s){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,o[0]&&(l=0)),l;)try{if(t=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,i=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=n.call(e,l)}catch(e){o=[6,e],i=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,function(o){switch(o.label){case 0:return[4,(0,k.r6)(e)];case 1:t=o.sent(),u.U.setCurrentFiles(c),u.U.setCurrentIndexDBInstance(t),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,(0,k.bQ)(t.db,"mika-ko-templates","daryl")];case 3:return(null==(i=o.sent())?void 0:i.templates)?u.U.setCurrentFiles(i.templates):(0,k.ys)(t.db,"mika-ko-templates",n),a=((null==i?void 0:i.templates)||c)[0].children.find(function(e){return e.filename.includes("index.html")}),u.U.updateCode(a.value,"index.html"),u.U.updateInfo(a),C(a),l=setInterval(function(){document.getElementById("previewFrame")&&(p((null==a?void 0:a.value)||"",(null==i?void 0:i.templates)||c),clearInterval(l))},500),[3,5];case 4:return r=o.sent(),console.log(r),[3,5];case 5:return[2]}})},new((l=void 0)||(l=Promise))(function(e,n){function t(e){try{s(r.next(e))}catch(e){n(e)}}function o(e){try{s(r.throw(e))}catch(e){n(e)}}function s(n){var i;n.done?e(n.value):(i=n.value,i instanceof l?i:new l(function(e){e(i)})).then(t,o)}s((r=r.apply(i,a||[])).next())});var i,a,l,r})},[]),(0,a.jsxs)("div",{className:"mika-mona-left-dir",children:[E,u.U.currentFiles.length>0&&(0,a.jsx)(o.A,{showLine:!1,showIcon:!0,icon:(0,a.jsx)(f.A,{}),switcherIcon:(0,a.jsx)(m.A,{}),onSelect:V,onRightClick:function(e){var n;B(null===(n=null==e?void 0:e.node)||void 0===n?void 0:n.path)},selectedKeys:A,onExpand:function(e,n){G(e)},expandedKeys:_,titleRender:function(e){return K===e.path?(0,a.jsx)(s.A,{size:"small",value:H,onClick:function(e){e.stopPropagation()},onFocus:function(e){e.stopPropagation()},onInput:function(e){!function(e){M(e.target.value)}(e)},onBlur:R}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mika-mona-left-dir-title",children:e.filename}),"src"===e.path&&(0,a.jsx)("span",{className:"mika-mona-left-dir-title-add",onClick:Q,children:(0,a.jsx)(h.A,{})}),T===e.path&&!(/App.vue|app.jsx|index.html|index.js|index.css/.test(T)||"src"===T)&&(0,a.jsxs)("div",{className:"mika-mona-left-dir-title-op",children:[(0,a.jsx)("span",{children:(0,a.jsx)(v.A,{onClick:function(n){!function(e,n){e.preventDefault(),e.stopPropagation(),M(null==n?void 0:n.filename),J(null==n?void 0:n.path)}(n,e)}})}),(0,a.jsx)("span",{children:(0,a.jsx)(b.A,{onClick:function(n){return function(e,n){e.preventDefault(),e.stopPropagation(),r.A.confirm({title:"Are you sure you want to delete this file?",onOk:function(){var e=(0,g.HO)(u.U.currentFiles),t=e[0].children;t=t.filter(function(e){return e.path!==n.path}),e[0].children=t,u.U.setCurrentFiles(e);var i={id:"daryl",name:"daryl",templates:(0,g.HO)(e)};(0,k.O6)(u.U.currentIndexDBInstance.db,"mika-ko-templates",i),N([c[0].children[0].path]);var a=e[0].children.find(function(e){return e.filename.includes("index.html")});p((null==a?void 0:a.value)||"",e),V(0,{node:a})}})}(n,e)}})})]})]})},treeData:(JSON.parse(JSON.stringify(u.U.currentFiles))||[]).map(function(e){return w(w({},e),{icon:"directory"===e.kind?(0,a.jsx)(y.A,{}):(0,a.jsx)(f.A,{})})}),fieldNames:{title:"filename",key:"path"}})]})});var U=t(4345),A=t(8463),N=t(5283),O=t(9082),F=t(3220),E=t(6745),I=t(5530),S=t(7427),P=t(2464),T=t(7463),B=function(e,n,t,i){return new(t||(t=Promise))(function(a,l){function r(e){try{s(i.next(e))}catch(e){l(e)}}function o(e){try{s(i.throw(e))}catch(e){l(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(r,o)}s((i=i.apply(e,n||[])).next())})},D=function(e,n){var t,i,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=o(0),r.throw=o(1),r.return=o(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(o){return function(s){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,o[0]&&(l=0)),l;)try{if(t=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,i=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=n.call(e,l)}catch(e){o=[6,e],i=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};const H=(0,x.PA)(function(e){var n=this,t=(0,i.useMemo)(function(){return/.*\.html$/.test(u.U.path)?"html":/.*\.js$/.test(u.U.path)?"javascript":"css"},[u.U.path]);return(0,a.jsxs)("div",{className:"mika-mona-center-editor",children:[(0,a.jsx)(S.A,{placement:"bottom",color:"lime",title:"formatting codes",children:(0,a.jsx)(P.Ay,{className:"mika-mona-center-editor-format",shape:"circle",icon:(0,a.jsx)(T.A,{}),size:"small",onClick:function(){return B(n,void 0,void 0,function(){var e,n,i;return D(this,function(a){switch(a.label){case 0:e=u.U.code,n=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,A.GP(e,{parser:"javascript"!==t?t:"babel",plugins:[N,E,O,F],tabWidth:4,useTabs:!1,semi:!0,singleQuote:!0,trailingComma:"none",bracketSpacing:!0,arrowParens:"always"})];case 2:return n=a.sent(),u.U.updateCode(" "),setTimeout(function(){u.U.replaceFileContent(n),u.U.updateCode(n)},200),[3,4];case 3:return i=a.sent(),console.log(i),[2];case 4:return[2]}})})}})}),u.U.code&&(0,a.jsx)(U.Ay,{height:"calc(100vh - 66px)",language:t,theme:"vs-dark",value:u.U.code,options:I.A,loading:(0,a.jsx)("div",{className:"monac-load",children:"编辑器加载中.."}),onChange:(0,d.N1)(function(e,t){return B(n,void 0,void 0,function(){var n,t;return D(this,function(i){return u.U.replaceFileContent(e),u.U.updateCode(e||" "),n=(0,d._P)(u.U.currentFiles,"src/index.html"),p(n||"",JSON.parse(JSON.stringify(u.U.currentFiles))),t={id:"daryl",name:"daryl",templates:(0,g.HO)(u.U.currentFiles)},(0,k.O6)(u.U.currentIndexDBInstance.db,"mika-ko-templates",t),[2]})})},1e3),onMount:function(e,n){e.focus()}})]})}),M=(0,x.PA)(function(e){var n=(0,i.useState)(!1),t=(n[0],n[1],(0,i.useRef)(null));return(0,a.jsx)("div",{className:"mika-mona-right-view simpleFrame",id:"previewFrame",ref:t})});var z=t(6907),K=t(2595);t(3990);const J=(0,z.PA)(function(){return(0,i.useEffect)(function(){},[]),i.createElement(i.Fragment,null,i.createElement("div",{className:"App"},i.createElement(C,null),i.createElement(H,null),i.createElement(M,null)),i.createElement(K.A,{spinning:u.U.showSpin,percent:"auto",fullscreen:!0},"code服务运行中。。。"))})}}]);