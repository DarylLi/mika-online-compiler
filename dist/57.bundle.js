"use strict";(self.webpackChunk_MikaEdit=self.webpackChunk_MikaEdit||[]).push([[57],{57:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var i=n(2197),a=n(3361),l=n(515),r=n(2709),o=n(7207),s=n(4788),c=[{filename:"src",value:"",path:"src",kind:"directory",children:[{filename:"index.html",value:'<!DOCTYPE html>\n<head> </head>\n<body>\n    <div class="litHead">\n        <img\n            src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MjUgMjAwIiBpZD0iZnVsbCI+Cjx2aWV3IGlkPSJmbGFtZSIgdmlld0JveD0iLTEzMi41IDAgMTYwIDIwMCIvPgo8dmlldyBpZD0ibmFtZSIgdmlld0JveD0iMzMyLjUgMTI3LjUgMTg1IDEyMiIgLz4KPHN5bWJvbCBpZD0ibmFtZS1zeW1ib2wiIHZpZXdCb3g9IjI0MCA3OCAxODUgMTIyIj4KPHBhdGggZmlsbD0idmFyKC0tbGl0LWxvZ28tdGV4dC1jb2xvciwgYmxhY2spIiBkPSJNMzk0LjUgNzh2MjguOEg0MjV2MTUuNmgtMzAuNVYxNThjMCAzLjYuMSA3LjIuNSAxMC4zLjggNS4zIDQgMTAuNSA4LjQgMTIuNSA1LjcgMi42IDkuNyAyLjEgMjEuNiAxLjdsLTIuOSAxNy4yYy0uOC40LTQgLjMtNyAuMy03IDAtMzMuNCAyLjUtMzguOC0yNC43LS45LTQuNy0uNy05LjUtLjctMTYuOXYtMzUuOEgzNjJsLjItMTUuOWgxMy40Vjc4em0tNTEuNyAyOC43djkxLjVIMzI0di05MS41em0wLTI4Ljd2MTYuM2gtMTlWNzh6bS04My42IDEwMi4yaDQ4LjJsLTE4IDE4SDI0MFY3OGgxOS4yeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iZmxhbWUtc3ltYm9sIiB2aWV3Qm94PSIwIDAgMTYwIDIwMCI+CjxwYXRoIGZpbGw9InZhcigtLWxpdC1sb2dvLWRhcmstY3lhbiwgIzAwZThmZikiIGQ9Ik00MCAxMjBsMjAtNjBsOTAgOTBsLTMwIDUwbC00MC00MGgtMjAiLz4KPHBhdGggZmlsbD0idmFyKC0tbGl0LWxvZ28tZGFyay1ibHVlLCAjMjgzMTk4KSIgZD0iTTgwIDE2MCBMODAgODAgTDEyMCA0MCBMIDEyMCAxMjAgTTAgMTYwIEw0MCAyMDAgTDQwIDEyMCBMMjAgMTIwIi8+CjxwYXRoIGZpbGw9InZhcigtLWxpdC1sb2dvLWJsdWUsICMzMjRmZmYpIiBkPSJNNDAgMTIwdi04MGw0MC00MHY4ME0xMjAgMjAwdi04MGw0MC00MHY4ME0wIDE2MHYtODBsNDAgNDAiLz4KPHBhdGggZmlsbD0idmFyKC0tbGl0LWxvZ28tY3lhbiwgIzBmZikiIGQ9Ik00MCAyMDB2LTgwbDQwIDQwIi8+Cjwvc3ltYm9sPgo8dXNlIGhyZWY9IiNuYW1lLXN5bWJvbCIgeD0iMzMyLjUiIHk9IjEyNy41IiB0cmFuc2Zvcm09InNjYWxlKDAuNjEpIj48L3VzZT4KPHVzZSBocmVmPSIjZmxhbWUtc3ltYm9sIiB4PSItMTMyLjUiPjwvdXNlPgo8L3N2Zz4K"\n        />\n    </div>\n    <simple-greeting name="Lit Page"></simple-greeting>\n</body>\n',path:"src/index.html"},{filename:"index.js",value:"export function isSameDate(date1, date2) {\n    return date1?.toLocaleDateString() === date2?.toLocaleDateString();\n}\n\n/**\n * Returns a Date object that displays the correct year, month, and day\n * in the local time zone, given a UTC Date object as returned by input type=\"date\".\n */\nexport function localDateFromUTC(utcDate) {\n    return new Date(\n        utcDate.getUTCFullYear(),\n        utcDate.getUTCMonth(),\n        utcDate.getUTCDate()\n    );\n}\n\nexport class SimpleGreeting extends LitElement {\n    static styles = css`\n        p {\n            color: blue;\n            font-size: 38px;\n            width: 100%;\n            text-align: center;\n        }\n        div {\n            color: #000;\n            font-size: 18px;\n            padding: 20px;\n        }\n    `;\n\n    static properties = {\n        date: {\n            // For wrapper types like Date, simple comparison won't work, because\n            // each Date is a new object\n            hasChanged: (value, oldValue) => {\n                return !isSameDate(value, oldValue);\n            }\n        },\n        name: { type: String }\n    };\n    constructor() {\n        super();\n        this.name = 'Somebody';\n        this.list = ['Peas', 'Carrots', 'Tomatoes'];\n    }\n    get datefield() {\n        return this.renderRoot?.querySelector('#datefield') ?? null;\n    }\n    updated(changed) {\n        if (changed.has('date')) {\n            this.datefield.animate(this.frames, 1000);\n        }\n    }\n\n    _dateChanged(e) {\n        const utcDate = e.target.valueAsDate;\n        if (utcDate) {\n            this.date = localDateFromUTC(utcDate);\n        }\n    }\n\n    _chooseToday() {\n        this.date = new Date();\n    }\n    render() {\n        return html`<p>Hello, ${this.name}!</p>\n            <div>\n                Render a list:\n                <ul>\n                    ${this.list.map(\n                        (item, index) => html` <li>${index}: ${item}</li> `\n                    )}\n                </ul>\n            </div>\n            <div class=\"lit-date\">\n                Choose a date:\n                <input type=\"date\" @change=${this._dateChanged} />\n                <button @click=${this._chooseToday}>Choose Today</button>\n                <div class=\"date-result\">\n                    Date chosen:\n                    <span id=\"datefield\">\n                        ${this.date?.toLocaleDateString()}</span\n                    >\n                </div>\n            </div> `;\n    }\n}\ncustomElements.define('simple-greeting', SimpleGreeting);\n",path:"src/index.js"},{filename:"index.css",value:"html,\nbody {\n    font-family: arial;\n    font-size: 14px;\n    height: 100%;\n    margin: 0;\n}\n.litHead {\n    width: 100%;\n    text-align: center;\n}\nimg {\n    width: 80%;\n    margin: auto;\n}\n.lit-date{\n  display: flex;\n  align-items: flex-start;\n}\n.date-result{\n  margin-top: 20px;\n}\n",path:"src/index.css"}]}],u=n(6205),d=n(8347),p=n(8833),m=function(e,t,n){var i,a={"index.html":e};((null==t||null===(i=t[0])||void 0===i?void 0:i.children)||[]).forEach(function(e){/index.html/.test(e.filename)||(a["".concat(e.filename)]=e.value)}),null==a||a["index.js"];var l=null==a?void 0:a["index.css"],r=null==a?void 0:a["index.js"],o=null==a?void 0:a["index.html"],s=document.createElement("iframe");s.setAttribute("id","frameLive"),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("style","border:0px"),s.setAttribute("srcdoc",'<!DOCTYPE html>\n<html lang="zh-CN">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>lit preview page</title>\n    <style>'.concat(l,"</style>\n</head>\n<body>\n<script>\nwindow.console=window.parent.console;\n<\/script>\n").concat(o,"\n    <script type=\"module\">\n        import {html, css, LitElement} from 'https://cdn.jsdmirror.com/gh/lit/dist@3/core/lit-core.min.js';\n        ").concat(r,"\n    <\/script>\n    </body>\n    </html>")),document.getElementById("previewFrame").innerHTML="",document.getElementById("previewFrame").appendChild(s)},h=n(1187),f=n(7453),v=n(3759),g=n(4539),y=n(7861),b=n(8918),x=n(475),j=n(9075),I=n(3790),M=function(){return M=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},M.apply(this,arguments)},w=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,l=t.length;a<l;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};const C=(0,j.PA)(function(e){var t,n=this,j=(e.cpType,(0,i.useState)({})),C=(j[0],j[1]),D=(0,i.useState)([c[0].children[0].path]),A=D[0],N=D[1],U=l.Ay.useMessage(),T=U[0],k=U[1],L=(0,i.useState)(null),S=L[0],E=(L[1],(0,i.useState)("")),F=E[0],O=E[1],P=(0,i.useState)(""),Z=P[0],z=P[1],H=(0,i.useState)(""),B=H[0],Y=H[1],G=(0,i.useState)([null===(t=c[0])||void 0===t?void 0:t.path]),W=G[0],J=G[1],K=function(e){var t=(0,I.HO)(u.U.currentFiles);(t[0].children||[]).forEach(function(e){e.path===B&&(e.filename=Z)}),u.U.setCurrentFiles(t);var n={id:"daryl",name:"daryl",templates:(0,I.HO)(t)};(0,x.O6)(u.U.currentIndexDBInstance.db,"lit-ng-templates",n);var i=t[0].children.find(function(e){return e.filename.includes("index.html")});m((null==i?void 0:i.value)||"",t),O(""),z(""),Y("")},V=function(e){if(e.preventDefault(),e.stopPropagation(),!S){var t=(0,I.HO)(u.U.currentFiles);(t[0].children||[]).forEach(function(e){e.path===B&&(e.filename=Z)});var n=t[0].children;if(n.length>7)T.open({type:"error",content:"maxium file number reached ！！"});else{var i={filename:"newFile".concat(n.length,".js"),path:"src/newFile".concat(n.length,".js"),value:" "};t[0].children.push(i),u.U.setCurrentFiles(t);var a={id:"daryl",name:"daryl",templates:(0,I.HO)(t)};(0,x.O6)(u.U.currentIndexDBInstance.db,"mika-lit-templates",a)}}},Q=function(e,t){var n,i,a,l,r,o,s;"directory"!==(null===(n=null==t?void 0:t.node)||void 0===n?void 0:n.kind)&&u.U.updateCode((0,p._P)(u.U.currentFiles,null===(i=null==t?void 0:t.node)||void 0===i?void 0:i.path)||"",null===(a=null==t?void 0:t.node)||void 0===a?void 0:a.path),"directory"!==(null===(l=null==t?void 0:t.node)||void 0===l?void 0:l.kind)&&u.U.updateInfo((null==t?void 0:t.node)||""),J(W.includes(null===(r=null==t?void 0:t.node)||void 0===r?void 0:r.filename)?W.filter(function(e){return e!==t.node.filename}):w(w([],W,!0),[null===(o=null==t?void 0:t.node)||void 0===o?void 0:o.filename],!1)),N([null===(s=null==t?void 0:t.node)||void 0===s?void 0:s.path]),O(""),Y("")};return(0,i.useEffect)(function(){var e={db:null,storeName:"mika-lit-templates",version:1},t={id:"daryl",name:"daryl",templates:c};setTimeout(function(){return i=n,a=void 0,r=function(){var n,i,a,l,r;return function(e,t){var n,i,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=o(0),r.throw=o(1),r.return=o(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,o[0]&&(l=0)),l;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,i=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,function(o){switch(o.label){case 0:return[4,(0,x.r6)(e)];case 1:n=o.sent(),u.U.setCurrentFiles(c),u.U.setCurrentIndexDBInstance(n),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,(0,x.bQ)(n.db,"mika-lit-templates","daryl")];case 3:return(null==(i=o.sent())?void 0:i.templates)?u.U.setCurrentFiles(i.templates):(0,x.ys)(n.db,"mika-lit-templates",t),a=((null==i?void 0:i.templates)||c)[0].children.find(function(e){return e.filename.includes("index.html")}),u.U.updateCode(a.value,"index.html"),u.U.updateInfo(a),C(a),l=setInterval(function(){document.getElementById("previewFrame")&&(m((null==a?void 0:a.value)||"",(null==i?void 0:i.templates)||c),clearInterval(l))},500),[3,5];case 4:return r=o.sent(),console.log(r),[3,5];case 5:return[2]}})},new((l=void 0)||(l=Promise))(function(e,t){function n(e){try{s(r.next(e))}catch(e){t(e)}}function o(e){try{s(r.throw(e))}catch(e){t(e)}}function s(t){var i;t.done?e(t.value):(i=t.value,i instanceof l?i:new l(function(e){e(i)})).then(n,o)}s((r=r.apply(i,a||[])).next())});var i,a,l,r})},[]),(0,i.useEffect)(function(){d.H.switchFileNode.length>0&&Q(0,{node:{path:d.H.switchFileNode[0],filename:d.H.switchFileNode[0]}})},[d.H.switchFileNode]),(0,a.jsxs)("div",{className:"mika-mona-left-dir",children:[k,u.U.currentFiles.length>0&&(0,a.jsx)(o.A,{showLine:!1,showIcon:!0,icon:(0,a.jsx)(h.A,{}),switcherIcon:(0,a.jsx)(f.A,{}),onSelect:Q,onRightClick:function(e){var t;O(null===(t=null==e?void 0:e.node)||void 0===t?void 0:t.path)},selectedKeys:A,onExpand:function(e,t){J(e)},expandedKeys:W,titleRender:function(e){return B===e.path?(0,a.jsx)(s.A,{size:"small",value:Z,onClick:function(e){e.stopPropagation()},onFocus:function(e){e.stopPropagation()},onInput:function(e){!function(e){z(e.target.value)}(e)},onBlur:K}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mika-mona-left-dir-title",children:e.filename}),"src"===e.path&&(0,a.jsx)("span",{className:"mika-mona-left-dir-title-add",onClick:V,children:(0,a.jsx)(v.A,{})}),F===e.path&&!(/App.vue|app.jsx|index.html|index.js|index.css/.test(F)||"src"===F)&&(0,a.jsxs)("div",{className:"mika-mona-left-dir-title-op",children:[(0,a.jsx)("span",{children:(0,a.jsx)(g.A,{onClick:function(t){!function(e,t){e.preventDefault(),e.stopPropagation(),z(null==t?void 0:t.filename),Y(null==t?void 0:t.path)}(t,e)}})}),(0,a.jsx)("span",{children:(0,a.jsx)(y.A,{onClick:function(t){return function(e,t){e.preventDefault(),e.stopPropagation(),r.A.confirm({title:"Are you sure you want to delete this file?",onOk:function(){var e=(0,I.HO)(u.U.currentFiles),n=e[0].children;n=n.filter(function(e){return e.path!==t.path}),e[0].children=n,u.U.setCurrentFiles(e);var i={id:"daryl",name:"daryl",templates:(0,I.HO)(e)};(0,x.O6)(u.U.currentIndexDBInstance.db,"mika-lit-templates",i),N([c[0].children[0].path]);var a=e[0].children.find(function(e){return e.filename.includes("index.html")});m((null==a?void 0:a.value)||"",e),Q(0,{node:a})}})}(t,e)}})})]})]})},treeData:(JSON.parse(JSON.stringify(u.U.currentFiles))||[]).map(function(e){return M(M({},e),{icon:"directory"===e.kind?(0,a.jsx)(b.A,{}):(0,a.jsx)(h.A,{})})}),fieldNames:{title:"filename",key:"path"}})]})});var D=n(4345),A=n(8463),N=n(5283),U=n(9082),T=n(3220),k=n(6745),L=n(5530),S=n(7427),E=n(2464),F=n(7463),O=function(e,t,n,i){return new(n||(n=Promise))(function(a,l){function r(e){try{s(i.next(e))}catch(e){l(e)}}function o(e){try{s(i.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,o)}s((i=i.apply(e,t||[])).next())})},P=function(e,t){var n,i,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=o(0),r.throw=o(1),r.return=o(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,o[0]&&(l=0)),l;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,i=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};const Z=(0,j.PA)(function(e){var t=this,n=(0,i.useMemo)(function(){return/.*\.html$/.test(u.U.path)?"html":/.*\.js$/.test(u.U.path)?"javascript":"css"},[u.U.path]),l=function(e,n){return O(t,void 0,void 0,function(){var t,n;return P(this,function(i){return u.U.replaceFileContent(e),u.U.updateCode(e||" "),t=(0,p._P)(u.U.currentFiles,"src/index.html"),m(t||"",JSON.parse(JSON.stringify(u.U.currentFiles))),n={id:"daryl",name:"daryl",templates:(0,I.HO)(u.U.currentFiles)},(0,x.O6)(u.U.currentIndexDBInstance.db,"mika-lit-templates",n),[2]})})};return(0,i.useEffect)(function(){d.H.updatedCode&&l(d.H.updatedCode)},[d.H.updatedCode]),(0,a.jsxs)("div",{className:"mika-mona-center-editor",children:[(0,a.jsx)(S.A,{placement:"bottom",color:"lime",title:"formatting codes",children:(0,a.jsx)(E.Ay,{className:"mika-mona-center-editor-format",shape:"circle",icon:(0,a.jsx)(F.A,{}),size:"small",onClick:function(){return O(t,void 0,void 0,function(){var e,t,i;return P(this,function(a){switch(a.label){case 0:e=u.U.code,t=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,A.GP(e,{parser:"javascript"!==n?n:"babel",plugins:[N,k,U,T],tabWidth:4,useTabs:!1,semi:!0,singleQuote:!0,trailingComma:"none",bracketSpacing:!0,arrowParens:"always"})];case 2:return t=a.sent(),u.U.updateCode(" "),setTimeout(function(){u.U.replaceFileContent(t),u.U.updateCode(t)},200),[3,4];case 3:return i=a.sent(),console.log(i),[2];case 4:return[2]}})})}})}),u.U.code&&(0,a.jsx)(D.Ay,{height:"calc(100vh - 66px)",language:n,theme:"vs-dark",value:u.U.code,options:L.A,loading:(0,a.jsx)("div",{className:"monac-load",children:"编辑器加载中.."}),onChange:(0,p.N1)(l,1e3),onMount:function(e,t){e.focus()}})]})}),z=(0,j.PA)(function(e){var t=(0,i.useRef)(null);return(0,a.jsx)("div",{className:"mika-mona-right-view simpleFrame",id:"previewFrame",ref:t})});var H=n(6907),B=n(2595);n(3990);const Y=(0,H.PA)(function(){return(0,i.useEffect)(function(){},[]),i.createElement(i.Fragment,null,i.createElement("div",{className:"App"},i.createElement(C,null),i.createElement(Z,null),i.createElement(z,null)),i.createElement(B.A,{spinning:u.U.showSpin,percent:"auto",fullscreen:!0},"code服务运行中。。。"))})}}]);